üá¨üáß [English version](README.md)

# üêô –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ GitLab

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è, —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π
GitLab CE —Å –ø–æ–º–æ—â—å—é Docker –∏ Python.

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üê≥ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ GitLab CE –∏ GitLab Runner —á–µ—Ä–µ–∑ Docker
- üõ† –£–¥–æ–±–Ω—ã–π CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ `gitlab_manager.py`
- üîÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ GitLab
- üß± –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Runner'–æ–≤ —á–µ—Ä–µ–∑ API GitLab —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Personal Access Token (PAT)
- üì¶ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏ –±—ç–∫–∞–ø–æ–≤ GitLab
- ‚öôÔ∏è –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `.env`
- ü™ü –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ `.bat`-—Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Windows

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml     # –°–µ—Ä–≤–∏—Å—ã GitLab –∏ Runner
‚îú‚îÄ‚îÄ gitlab_manager.py      # –û—Å–Ω–æ–≤–Ω–æ–π CLI-—Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ core/                  # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏ (–±—ç–∫–∞–ø, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ *.bat                  # –ë—ã—Å—Ç—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è Windows
‚îî‚îÄ‚îÄ LICENSE
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
python gitlab_manager.py start            # –ó–∞–ø—É—Å–∫ GitLab
python gitlab_manager.py stop             # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ GitLab
python gitlab_manager.py restart          # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ GitLab
python gitlab_manager.py status           # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ GitLab
python gitlab_manager.py register_runner  # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Runner'–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è PAT)
python gitlab_manager.py backup           # –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ GitLab
python gitlab_manager.py restore          # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ GitLab –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
```

–í Windows –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.bat`-—Ñ–∞–π–ª—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`:

```env
# Main Settings
GITLAB_CONTAINER_NAME=gitlab
GITLAB_PROTOCOL=http
GITLAB_HOST=gitlab.local
GITLAB_HTTP_PORT=80
GITLAB_SSH_PORT=2222
GITLAB_REGISTRY_PORT=5050
GITLAB_URL="${GITLAB_PROTOCOL}://${GITLAB_HOST}:${GITLAB_HTTP_PORT}"
GITLAB_REGISTRY_EXTERNAL_URL="${GITLAB_PROTOCOL}://${GITLAB_HOST}:${GITLAB_REGISTRY_PORT}"
GITLAB_PAT=

# GitLab Runner
GITLAB_RUNNER_CONTAINER_NAME=gitlab-runner
GITLAB_RUNNER_DOCKER_IMAGE="node:22"
GITLAB_RUNNER_SETTINGS=concurrent=4,privileged=true,disable_cache=true

# Backup Settings
AUTO_BACKUP=false
BACKUP_DIR=X://MyPrograms/GitLab/backups
```

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å–∞, –ø–æ—Ä—Ç—ã, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Runner.
–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º Runner, —Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å Private Access Token –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `GITLAB_PAT` —Å –ø—Ä–∞–≤–∞–º–∏ `api` –∏
`admin_mode`.

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö–æ—Å—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä gitlab.local, –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Ñ–∞–π–ª hosts —Å–∏—Å—Ç–µ–º—ã, —á—Ç–æ–±—ã –æ–Ω
–∞–¥—Ä–µ—Å–æ–≤–∞–ª—Å—è –≤ 127.0.0.1

---

## üîê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Runner'–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python gitlab_manager.py register_runner
```

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ Private Access Token —Å –ø—Ä–∞–≤–∞–º–∏ `api` –∏ `admin_mode`, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ –≤ `.env` –≤
–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
`GITLAB_PAT`.

–ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å —Ñ–ª–∞–≥–æ–º `--force`.

---

## üß¨ –ü—Ä–∏–º–µ—Ä —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
python gitlab_manager.py backup
```

–°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

- –ê—Ä—Ö–∏–≤ —Å –±—ç–∫–∞–ø–æ–º (`.tar`)
- gitlab.rb
- gitlab-secrets.json
- config.toml

–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `BACKUP_DIR`, —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ `.env`.

---

## üîÅ –ü—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
python gitlab_manager.py restore
```

–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç **–≤—Å—ë** –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç GitLab.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT](LICENSE)

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –ú–∏—Ö–∞–∏–ª–æ–º –†—É—Å–∞–∫–æ–≤—ã–º, 2025

---

## –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è "–∫–∞–∫ –µ—Å—Ç—å" –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π, —è–≤–Ω—ã—Ö –∏–ª–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ–º—ã—Ö. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å—ë—Ç
–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—Å—Ç–æ–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.env`, —Ñ–∞–π–ª `hosts`, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Docker) –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
–±—ç–∫–∞–ø–∞/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å—Ä–µ–¥–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤–∞–∂–Ω—ã—Ö
–¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.
